'use strict';

/**
 * –ù–∞–ø–∏—Å–∞—Ç—å —Å–∫—Ä–∏–ø—Ç –∫–æ—Ç–æ—Ä—ã–π –æ–ø—Ä–µ–¥–µ–ª–∏—Ç –∏ –≤—ã–≤–µ–¥–∏—Ç —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞
 * –∫–æ—Ç–æ—Ä—ã–π –≤—ã–ø–æ–ª–Ω–∏–ª –±–æ–ª—å—à–µ –≤—Å–µ—Ö –∑–∞–¥–∞—á
 */

// const taskCompleted = {
//   ann: 29,
//   david: 35,
//   helen: 1,
//   lorence: 99,
// };

const findPersonWithMaxTasks = function (stats) {
  let max = 0;
  let workerName;

  const keys4 = Object.keys(stats);

  for (const key of keys4) {
    if (max < stats[key]) {
      max = stats[key];
      workerName = key;
    }
  }

  return {
    workerName,
    max,
  };
};

console.log(
  findPersonWithMaxTasks({
    ann: 209,
    david: 35,
    helen: 1,
    lorence: 99,
  }),
);

console.log(
  findPersonWithMaxTasks({
    ann: 29,
    david: 35,
    helen: 112,
    lorence: 99,
  }),
);

/**
 * –ù–∞–ø–∏—à–∏ —Ñ—É–Ω–∫—Ü–∏—é
 * —Å—á–∏—Ç–∞–µ—Ç–∏ –≤—ã–≤–æ–¥–∏—Ç –æ–±—â—É—é —Å—É–º–º—É –ó–ü
 */

const countTotalSalary = function (samary) {
  const values = Object.values(samary);
  console.log(values);

  let total = 0;
  for (const value of values) {
    total += value;
  }

  return total;
};

console.log(countTotalSalary({})); // 0

console.log(
  countTotalSalary({
    ivan: 80,
    fedor: 150,
    petro: 90,
    vova: 210,
  }),
);

/**
 * –ù–∞–ø–∏—à–∏ —Ñ—É–Ω–∫—Ü–∏—é getAllPropValues(arr, prop),
 * –∫–æ—Ç–æ—Ä–∞—è –ø–æ–ª—É—á–∞–µ—Ç –º–∞—Å—Å–∏–≤ –æ–±—ä–µ–∫—Ç–æ–≤ –∏ –∏–º—è –∫–ª—é—á–∞.
 * –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –º–∞—Å—Å–∏–≤ –∑–Ω–∞—á–µ–Ω–∏–π –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ –ø–æ–ª—è prop
 * –∑ –∫–∞–∂–¥–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞ –≤ –º–∞—Å—Å–∏–≤–µ
 */

const users = [
  { name: 'Poly', age: 7, mood: 'happy' },
  { name: 'Mango', age: 4, mood: 'blissful' },
  { name: 'Ajax', age: 3, mood: 'tired' },
];

const getAllPropValues = function (users, key) {
  const values = [];

  for (const user of users) {
    if (key in user) {
      values.push(user[key]);
    }
  }
  return values;
};

// –í—ã–∑–æ–≤—ã —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
console.log(getAllPropValues(users, 'name')); // ['Poly', 'Mango', 'Ajax']

console.log(getAllPropValues(users, 'mood')); // ['happy', 'blissful', 'tired']

console.log(getAllPropValues(users, 'active')); // []

/**
 * filter -> –ø—Ä–∏—à–ª–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞–≥—Ä—É–∑–æ–∫ –∏ –Ω–∞–¥–æ –≤—ã–±—Ä–∞—Ç—å —Ç–µ —á—Ç–æ –±–æ–ª—å—à–µ –ø—Ä–æ—Ü–µ–Ω—Ç–∞
 */

const uploads = [
  { name: 'pdf', percentage: 14 },
  { name: 'psd', percentage: 21 },
  { name: 'mp3', percentage: 3 },
  { name: 'flac', percentage: 7 },
];

const filterUploadsWithThreshold = function (uploads, threshold) {
  const values = [];
  for (let i = 0; i < uploads.length; i += 1) {
    if (threshold < uploads[i].percentage) {
      values.push(uploads[i].percentage);
    }
  }
  return values;
};

filterUploadsWithThreshold(uploads, 10);

/*
 * –ï—Å—Ç—å –¥–≤–∞ –º–∞—Å—Å–∏–≤–∞ names –∏ prices —Å –∏–º–µ–Ω–∞–º–∏ –∏ —Ü–µ–Ω–∞–º–∏ —Ç–æ–≤–∞—Ä–æ–≤.
 * –ù–∞–ø–∏—à–∏—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é combine(names, prices), –∫–æ—Ç–æ—Ä–∞—è –ø–æ–ª—É—á–∞–µ—Ç
 * —ç—Ç–∏ –¥–≤–∞ –º–∞—Å—Å–∏–≤–∞ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –º–∞—Å—Å–∏–≤ –æ–±—ä–µ–∫—Ç–æ–≤ —Å–æ —Å–≤–æ–π—Å—Ç–≤–∞–º–∏ name –∏ price.
 */

const names = [
  '–†–∞–¥–∞—Ä',
  '–°–∫–∞–Ω–µ—Ä',
  '–î—Ä–æ–∏–¥',
  '–ó–∞—Ö–≤–∞—Ç',
  '–î–≤–∏–≥–∞—Ç–µ–ª—å',
  '–¢–æ–ø–ª–∏–≤–Ω—ã–π –±–∞–∫',
];
const prices = [1000, 2000, 1500, 2700, 1600, 8000];

// {
//   '–†–∞–¥–∞—Ä':  1000,
//   '–°–∫–∞–Ω–µ—Ä': 2000
// }

const combine = function (names, prices) {
  const combined = [];

  for (let i = 0; i < names.length; i += 1) {
    const obj = {
      name: names[i],
      price: prices[i],
    };

    combined.push(obj);
  }
  return combined;
};

const products = combine(names, prices);
console.table(products); // –º–∞—Å—Å–∏–≤ –æ–±—ä–µ–∫—Ç–æ–≤ —Å–æ —Å–≤–æ–π—Å—Ç–≤–∞–º–∏ name –∏ price

/**
 * –ø–∞—Ç—Ç–µ—Ä–Ω enumerable
 */

const DeliveryOption = {
  TAKEOUT: 1,
  COURIER: 2,
  POST: 3,
};

while (true) {
  userChoice = prompt(
    `–í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—Ä–∏–∞–Ω—Ç –¥–æ—Å—Ç–∞–≤–∫–∏: ${DeliveryOption.TAKEOUT} - —Å–∞–º–æ–≤—ã–≤–æ–∑, ${DeliveryOption.COURIER} - –∫—É—Ä—å–µ—Ä, ${DeliveryOption.POST} - –ø–æ—á—Ç–∞`,
  );

  if (userChoice === null) {
    break;
  }

  userChoice = Number(userChoice);

  const deliveryOptions = Object.values(DeliveryOption);

  if (deliveryOptions.includes(userChoice)) {
    break;
  }
}

switch (userChoice) {
  case DeliveryOption.TAKEOUT:
    alert('–°–∞–º–æ–≤—ã–≤–æ–∑!');
    break;

  case DeliveryOption.COURIER:
    alert('–ö—É—Ä—å–µ—Ä!');
    break;

  case DeliveryOption.POST:
    alert('–ü–æ—á—Ç–∞!');
    break;

  default:
    alert('–í–∞–º –ø–µ—Ä–µ–∑–≤–æ–Ω–∏—Ç –º–µ–Ω–µ–¥–∂–µ—Ä!');
}

const friends = [
  { name: 'Mango', online: false },
  { name: 'Kiwi', online: true },
  { name: 'Poly', online: false },
  { name: 'Ajax', online: false },
];

/*
 * –ò—â–µ–º –¥—Ä—É–≥–∞ –ø–æ –∏–º–µ–Ω–∏
 */

const findFriendByName = function (allFriends, friendName) {
  for (const friend of allFriends) {
    // console.log(friend);
    // console.log(friend.name);

    if (friend.name === friendName) {
      return '–ù–ê–®–õ–ò!!!';
    }
  }

  return '–ù–ï –ù–ê–®–õ–ò :(';
};

console.log(findFriendByName(friends, 'Poly'));
console.log(findFriendByName(friends, 'Chelsy'));

/*
 * –ü–æ–ª—É—á–∞–µ–º –∏–º–µ–Ω–∞ –≤—Å–µ—Ö –¥—Ä—É–∑–µ–π
 */

const getAllNames = function (allFriends) {
  const names = [];

  for (const friend of allFriends) {
    console.log(friend.name);

    names.push(friend.name);
  }

  return names;
};

/*
 * –ü–æ–ª—É—á–∞–µ–º –∏–º–µ–Ω–∞ —Ç–æ–ª—å–∫–æ –¥—Ä—É–∑–µ–π –∫–æ—Ç–æ—Ä—ã–µ –æ–Ω–ª–∞–π–Ω
 */
const getOnlineFriends = function (allFriends) {
  const onlineFriends = [];

  for (const friend of allFriends) {
    console.log(friend);
    console.log(friend.online);

    if (friend.online) {
      onlineFriends.push(friend);
    }
  }

  return onlineFriends;
};

console.log(getOnlineFriends(friends));

/*
 * –ü–æ–ª—É—á–∞–µ–º –∏–º–µ–Ω–∞ —Ç–æ–ª—å–∫–æ –¥—Ä—É–∑–µ–π –∫–æ—Ç–æ—Ä—ã–µ –æ—Ñ–ª–∞–π–Ω
 */
const getOfflineFriends = function (allFriends) {
  const offlineFriends = [];

  for (const friend of allFriends) {
    console.log(friend.online);

    if (!friend.online) {
      offlineFriends.push(friend);
    }
  }

  return offlineFriends;
};

console.log(getOfflineFriends(friends));

// —Å–æ–∑–¥–∞—Ç—å 2 –º–∞—Å—Å–∏–≤–∞ –æ–Ω–ª–∞–π–Ω –∏ –æ—Ñ–ª–∞–π–Ω?
// –µ—Å–ª–∏ —Ç—Ä—É - –≤ –ø–µ—Ä–≤—ã–π, –µ—Å–ª–∏ –Ω–µ—Ç - –≤–æ –≤—Ç–æ—Ä–æ–π

const getFriendsByStatus = function (allFriends) {
  const friendsByStatus = {
    online: [],
    offline: [],
  };

  for (const friend of allFriends) {
    if (friend.online) {
      friendsByStatus.online.push(friend);
      continue;
    }

    friendsByStatus.offline.push(friend);

    // const key = friend.online ? 'online' : 'offline';
    // friendsByStatus[key].push(friend);
  }

  return friendsByStatus;
};

console.log(getFriendsByStatus(friends));

/**
 * –£–∑–Ω–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–Ω–∞—á–µ–Ω–∏–π –≤ –æ–±—å–µ–∫—Ç–µ
 */

const x = {
  a: 1,
  b: 2,
  c: 12,
  d: 23,
};

console.log(Object.keys(x).length);

/*
 * –†–∞–±–æ—Ç–µ–º —Å –∫–æ–ª–ª–µ–∫—Ü–∏–µ–π —Ç–æ–≤–∞—Ä–æ–≤ –≤ –∫–æ—Ä–∑–∏–Ω–µ:
 * - getItems()
 * - add(product)
 * - remove(productName)
 * - clear()
 * - countTotalPrice()
 * - increaseQuantity(productName)
 * - decreaseQuantity(productName)
 *
 * { name: 'üçé', price: 50 }
 * { name: 'üçá', price: 70 }
 * { name: 'üçã', price: 60 }
 * { name: 'üçì', price: 110 }
 */

const cart = {
  items: [],
  getItems() {
    return this.items;
  },
  add(product) {
    for (const item of this.items) {
      if (item.name === product.name) {
        item.quantity += 1;
        return;
      }
    }

    const newProduct = {
      ...product,
      quantity: 1,
    };
    this.items.push(newProduct);
  },
  remove(productName) {
    const { items } = this;

    for (let i = 0; i < items.length; i += 1) {
      if (productName === items[i].name) {
        items.splice(i, 1);
      }
    }
  },
  clear() {
    this.items = [];
  },
  countTotalPrice() {
    const { items } = this;
    let total = 0;

    for (const { price, quantity } of items) {
      total += price * quantity;
    }

    return total;
  },
  increaseQuantity(productName) {
    for (const item of this.items) {
      if (item.name === productName) {
        item.quantity += 1;
      }
    }
  },
  decreaseQuantity(productName) {
    for (const item of this.items) {
      if (item.name === productName) {
        item.quantity -= 1;
      }
    }
  },
};

console.table(cart.getItems());

cart.add({ name: 'üçé', price: 50 });
cart.add({ name: 'üçã', price: 60 });
cart.add({ name: 'üçã', price: 60 });
cart.add({ name: 'üçì', price: 110 });
cart.add({ name: 'üçé', price: 50 });
cart.add({ name: 'üçã', price: 60 });
cart.add({ name: 'üçã', price: 60 });
cart.add({ name: 'üçì', price: 110 });

console.table(cart.getItems());

console.log('Total: ', cart.countTotalPrice());

cart.remove('üçé');
console.table(cart.getItems());

console.log('Total: ', cart.countTotalPrice());

cart.clear();
console.table(cart.getItems());

cart.add({ name: 'üçé', price: 50 });
cart.add({ name: 'üçã', price: 60 });
cart.add({ name: 'üçã', price: 60 });
cart.add({ name: 'üçì', price: 110 });

cart.increaseQuantity('üçé');
console.table(cart.getItems());

cart.decreaseQuantity('üçã');
cart.decreaseQuantity('üçã');
console.table(cart.getItems());

console.log('Total: ', cart.countTotalPrice());
